# 키즈빌리지 상품 수집기 - 사용설명서 (Windows)

---

## 1. 준비물

- `KidsVillage_Collector.exe` (실행 파일)
- 키즈빌리지 도매 사이트 계정 (아이디 / 비밀번호)

---

## 2. 폴더 구성

실행 파일을 원하는 폴더에 넣고, 같은 폴더 안에 로그인 설정 파일을 준비합니다.
CSV 파일과 출력 폴더는 실행 시 자유롭게 선택할 수 있으므로 어디에 있어도 됩니다.

```
내 작업폴더/
├── KidsVillage_Collector.exe    ← 실행 파일
└── .credentials.yaml            ← (선택) 로그인 정보 자동입력용
```

---

## 3. CSV 파일 작성법

함께 제공된 `input_example.csv` 파일을 복사하여 사용하거나, 메모장 또는 엑셀에서 직접 작성합니다.

### 컬럼 설명

| 컬럼 | 설명 |
|-------|------|
| `url` | 키즈빌리지 상품 페이지 주소 |
| `margin` | 마진 금액 (원 단위, 숫자만) |

> 판매가는 **도매가 + margin** 으로 자동 계산됩니다.
> 예) 도매가 19,000원 + margin 5,000원 = 판매가 24,000원

### 예시

```
url,margin
https://kidsvillage.co.kr/shop/item.php?it_id=21C1770199956,5000
https://kidsvillage.co.kr/shop/item.php?it_id=50C1769993181,4000
```

### 주의사항

- 첫 줄(헤더)은 반드시 `url,margin` 이어야 합니다.
- URL과 마진 사이에 쉼표(,) 하나로 구분합니다.
- 마진은 숫자만 입력합니다 (콤마, 원 등 제외).
- 엑셀에서 저장할 때 **CSV UTF-8** 형식으로 저장하세요.

---

## 4. 로그인 정보 자동입력 설정 (선택)

매번 아이디/비밀번호를 입력하기 번거롭다면, 실행 파일과 같은 폴더에 `.credentials.yaml` 파일을 만들어 두세요.

### 만드는 방법

1. 메모장을 엽니다.
2. 아래 내용을 입력합니다 (본인의 아이디/비밀번호로 변경):

```
username: 내아이디
password: 내비밀번호
```

3. **파일 > 다른 이름으로 저장**을 클릭합니다.
4. 파일 이름을 `.credentials.yaml` 로 입력합니다.
5. 파일 형식을 **모든 파일 (*.*)** 로 변경합니다.
6. 인코딩을 **UTF-8** 로 선택합니다.
7. 실행 파일과 같은 폴더에 저장합니다.

> 이 파일이 있으면 프로그램 시작 시 아이디와 비밀번호가 자동으로 채워집니다.

---

## 5. 프로그램 실행

### 5-1. 프로그램 시작

`KidsVillage_Collector.exe`를 더블클릭합니다.

### 5-2. 설정 입력

| 항목 | 설명 |
|------|------|
| **아이디** | 키즈빌리지 로그인 아이디 (`.credentials.yaml` 설정 시 자동입력) |
| **비밀번호** | 키즈빌리지 로그인 비밀번호 (`.credentials.yaml` 설정 시 자동입력) |
| **CSV 파일** | [찾아보기] 버튼으로 준비한 CSV 파일을 선택 |
| **출력 폴더** | [찾아보기] 버튼으로 결과물을 저장할 폴더를 선택 |

### 5-3. 실행

**[실행]** 버튼을 클릭하면 수집이 시작됩니다.

- 진행상황 바에서 현재 처리 중인 상품을 확인할 수 있습니다.
- 하단 로그 창에서 상세한 진행 내역을 볼 수 있습니다.
- 완료되면 "완료: 성공 N건, 실패 N건" 메시지가 표시됩니다.

### 5-4. 결과 확인

**[출력 폴더 열기]** 버튼을 클릭하면 결과 폴더가 탐색기에서 열립니다.

---

## 6. 출력 결과물

실행이 완료되면 출력 폴더에 다음과 같은 구조로 저장됩니다.

```
출력폴더/
├── summary.txt                                    ← 전체 실행 결과 요약
├── messages.txt                                   ← 모든 상품 메시지 통합본
├── 21C1770199956_아미고_마인드후드남방/
│   ├── 01.jpg ~ NN.jpg                            ← 상품 이미지
│   └── message.txt                                ← 개별 상품 메시지
└── 50C1769993181_메리고라운드_프렌드맨투맨/
    ├── 01.jpg ~ NN.jpg
    └── message.txt
```

### 파일별 설명

| 파일 | 설명 |
|------|------|
| `summary.txt` | 실행 시각, 성공/실패 건수, 상품별 도매가·판매가·마진 요약 |
| `messages.txt` | 모든 상품의 메시지를 `====` 구분선으로 합친 파일 |
| `상품폴더/message.txt` | 개별 상품의 전송용 메시지 |
| `상품폴더/01.jpg` ... | 상품 상세 이미지 |

### message.txt 예시

```
☑️ 아미고 마인드후드남방

- 가격
26000

- 컬러
아이 브라운

- 사이즈
XS,S,M,L,XL
```

---

## 7. 문제 해결

| 증상 | 해결 방법 |
|------|-----------|
| 프로그램이 실행되지 않음 | Windows Defender 등 백신에서 차단되었을 수 있습니다. 예외 등록 후 다시 시도하세요. |
| "로그인에 실패했습니다" | 아이디/비밀번호를 다시 확인하세요. 키즈빌리지 사이트에서 직접 로그인되는지도 확인하세요. |
| "유효한 CSV 파일을 선택해주세요" | CSV 파일 경로가 올바른지, 파일이 존재하는지 확인하세요. |
| 일부 상품만 실패 | `summary.txt`에서 실패 원인을 확인하세요. 상품 URL이 올바른지, 해당 상품이 삭제되지 않았는지 확인하세요. |
| 이미지가 수집되지 않음 | 키즈빌리지 사이트 구조가 변경되었을 수 있습니다. 개발자에게 문의하세요. |
